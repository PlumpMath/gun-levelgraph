{"version":3,"sources":["save-levelgraph.js"],"names":["createSaveToLvGraph","saveToLvGraph","$saveToLvGraph","addSaveToLvGraph","levelup","require","levelgraph","jsonld","promisify","defaultOpts","dbPath","base","buildOpts","_opts","Object","assign","levelDB","lvGraphDb","db","opts","cb","Error","put","saveToJsonLd","chain","addSaveToJsonLd"],"mappings":";;;;;QAmBgBA,mB,GAAAA,mB;QAaAC,a,GAAAA,a;QAWAC,c,GAAAA,c;QAIAC,gB,GAAAA,gB;AA/ChB,IAAMC,UAAUC,QAAQ,SAAR,CAAhB;AACA,IAAMC,aAAaD,QAAQ,YAAR,CAAnB;AACA,IAAME,SAASF,QAAQ,mBAAR,CAAf;AACA,IAAMG,YAAYH,QAAQ,aAAR,CAAlB;;AAEA,IAAMI,cAAc;AAClBC,UAAQ,SADU;AAElBC,QAAM;AAFY,CAApB;;AAKA,SAASC,SAAT,CAAmBC,KAAnB,EAA0B;AACxBA,UAAQC,OAAOC,MAAP,CAAcN,WAAd,EAA2BI,KAA3B,CAAR;;AAEAA,QAAMG,OAAN,GAAgBH,MAAMG,OAAN,IAAiBZ,QAAQS,MAAMH,MAAd,CAAjC;AACAG,QAAMI,SAAN,GAAkBJ,MAAMI,SAAN,IAAmBX,WAAWO,MAAMG,OAAjB,CAArC;AACAH,QAAMK,EAAN,GAAWL,MAAMK,EAAN,IAAYX,OAAOY,KAAKF,SAAZ,EAAuBE,IAAvB,CAAvB;AACA,SAAON,KAAP;AACD;;AAEM,SAASb,mBAAT,CAA6Ba,KAA7B,EAAoC;AACzCA,UAAQD,UAAUC,KAAV,CAAR;;AAEA,SAAO,SAASZ,aAAT,CAAuBM,MAAvB,EAA+Ba,EAA/B,EAAmCD,IAAnC,EAAyC;AAC9CA,WAAOL,OAAOC,MAAP,CAAcF,KAAd,EAAqBM,IAArB,CAAP;AACA,QAAMD,KAAKC,KAAKD,EAAhB;AACA,QAAI,CAACA,EAAL,EAAS;AACP,YAAM,IAAIG,KAAJ,CAAU,kCAAV,CAAN;AACD;AACDd,WAAOe,GAAP,CAAWf,MAAX,EAAmBa,EAAnB,EAAuBD,IAAvB;AACD,GAPD;AAQD;;AAEM,SAASlB,aAAT,CAAuBM,MAAvB,EAA+Ba,EAA/B,EAAmCD,IAAnC,EAAyC;AAC9CA,SAAOL,OAAOC,MAAP,CAAcN,WAAd,EAA2BU,IAA3B,CAAP;AACAA,SAAOP,UAAUO,IAAV,CAAP;;AAEA,MAAMD,KAAKC,KAAKD,EAAhB;AACA,MAAI,CAACA,EAAL,EAAS;AACP,UAAM,IAAIG,KAAJ,CAAU,kCAAV,CAAN;AACD;AACDH,KAAGX,MAAH,CAAUe,GAAV,CAAcf,MAAd,EAAsBa,EAAtB,EAA0BD,IAA1B;AACD;;AAEM,SAASjB,cAAT,CAAwBK,MAAxB,EAAgCa,EAAhC,EAAoCD,IAApC,EAA0C;AAC/C,SAAOX,UAAUe,YAAV,EAAwBhB,MAAxB,EAAgCY,IAAhC,CAAP;AACD;;AAEM,SAAShB,gBAAT,CAA0BqB,KAA1B,EAAiC;AACtCA,QAAMvB,aAAN,GAAsB,UAAUmB,EAAV,EAAcD,IAAd,EAAoB;AACxC,WAAOlB,cAAc,IAAd,EAAoBmB,EAApB,EAAwBD,IAAxB,CAAP;AACD,GAFD;;AAIAK,QAAMtB,cAAN,GAAuB,UAAUkB,EAAV,EAAcD,IAAd,EAAoB;AACzC,WAAOjB,eAAe,IAAf,EAAqBkB,EAArB,EAAyBD,IAAzB,CAAP;AACD,GAFD;;AAIA,SAAOK,KAAP;AACD;;kBAEcC,e","file":"save-levelgraph.js","sourcesContent":["const levelup = require('levelup')\nconst levelgraph = require('levelgraph')\nconst jsonld = require('levelgraph-jsonld')\nconst promisify = require('./promisify')\n\nconst defaultOpts = {\n  dbPath: './gundb',\n  base: 'http://gun.io/base'\n}\n\nfunction buildOpts(_opts) {\n  _opts = Object.assign(defaultOpts, _opts)\n\n  _opts.levelDB = _opts.levelDB || levelup(_opts.dbPath)\n  _opts.lvGraphDb = _opts.lvGraphDb || levelgraph(_opts.levelDB)\n  _opts.db = _opts.db || jsonld(opts.lvGraphDb, opts)\n  return _opts\n}\n\nexport function createSaveToLvGraph(_opts) {\n  _opts = buildOpts(_opts)\n\n  return function saveToLvGraph(jsonld, cb, opts) {\n    opts = Object.assign(_opts, opts)\n    const db = opts.db\n    if (!db) {\n      throw new Error('saveToLvGraph: missing db option')\n    }\n    jsonld.put(jsonld, cb, opts)\n  }\n}\n\nexport function saveToLvGraph(jsonld, cb, opts) {\n  opts = Object.assign(defaultOpts, opts)\n  opts = buildOpts(opts)\n\n  const db = opts.db\n  if (!db) {\n    throw new Error('saveToLvGraph: missing db option')\n  }\n  db.jsonld.put(jsonld, cb, opts)\n}\n\nexport function $saveToLvGraph(jsonld, cb, opts) {\n  return promisify(saveToJsonLd, jsonld, opts)\n}\n\nexport function addSaveToLvGraph(chain) {\n  chain.saveToLvGraph = function (cb, opts) {\n    return saveToLvGraph(this, cb, opts)\n  }\n\n  chain.$saveToLvGraph = function (cb, opts) {\n    return $saveToLvGraph(this, cb, opts)\n  }\n\n  return chain\n}\n\nexport default addSaveToJsonLd"]}